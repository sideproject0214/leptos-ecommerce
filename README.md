# Ecommerce Refactory 

## chapter1 [2023-12-12 09:01:31]
- 도커 컴포즈를 통해서 작동시키려했으나 컴 사양문제로 어려움
  - 러스트가 컴파일이 늦어서 도커로 작동시키면 컴파일에 시간이 너무 걸림
- 따라서 client, api는 그냥 로컬에서 justfile로 작동시킴
- 나머지 파일은 origin에서 복사해서 챕터를 만들기로 함 
- 따라서 개발시에는 gateway 없이 작동시킬 예정

### [api] [2023-12-12 17:54:50]
- api의 경우 models에 스키마를 정의하고 controller 폴더를 따로 만들어 관리했지만
- 여기서는 테이블별로 폴더를 만들고 그곳에서 모델을 정의하고 관련된 controller를 저장할 것이다

### [api][seeder] [2023-12-21 22:53:23]
- seeder는 미리 model 구조가 정의되어야 하고, seed더미파일은 json으로 만들고 필드 이름에 해당 모델이름이 들어가야 한다. 그래서 파일이름 무관하게 json 파일을 읽어오면 json 필드 이름을 기준으로 entities 폴더에서 해당 파일이름.rs 파일에서 구조체를 가져오고 seeder task 폴더에서 파일을 읽어 필드이름을 기준으로 seeder를 for 반복문으로 돌려서 sqlx를 사용해 postgres에 입력한다
- json 파일 형태 {"모델이름":[{},{}, ~ , {}]} 이렇게 만든다
- [2023-12-21 22:59:24] 이전까지는 파일이름을 기준으로 json 파일의 필드이름을 선태해서 값을 가져왔다. Next.js 같은 경우도 폴더이름 등으로 기준으로 하니까... 일단 이방식으로 밀어 붙여봐야겠다. 구상은 새롭게 해봤지만 파일이름 기준으로 하는것도 이미 거의다 만들었으니 나쁘지 않을듯...
- [seeder 작동 조건 / nodejs sequelize 기준]
  - 1. 모델 구조는 미리 정의되어 있을 것
  - 2. db에 이미 해당 테이블이 만들어져 있을 것
    - [o](구현 : 서버 작동시 migration 파일이 있으면 자동으로 만들어짐)
  - 3. seeder는 순수히 json 파일을 그냥 자동으로 db에 migration 하는 기능만 할 것
  - 4. task 폴더에 있는 파일 중 json 확장자만 읽어서 마이그레이션 시키고 완료파일은 success로 옮길 것